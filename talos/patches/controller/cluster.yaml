# vim:ft=yaml
---
cluster:
  allowSchedulingOnControlPlanes: true

  apiServer:
    admissionControl:
      $$patch: delete
    auditPolicy:
      apiVersion: audit.k8s.io/v1
      kind: Policy
      rules:
        - level: Metadata
    disablePodSecurityPolicy: true
    extraArgs:
      enable-aggregator-routing: "true"
      feature-gates: ImageVolume=true,MutatingAdmissionPolicy=true
      runtime-config: admissionregistration.k8s.io/v1beta1=true

      oidc-issuer-url: https://id.hayden.moe/realms/haydenmoe
      oidc-username-claim: username
      oidc-client-id: headlamp

  controllerManager:
    extraArgs:
      bind-address: 0.0.0.0

  coreDNS:
    disabled: true  # replaced by helm chart deployment later

  etcd:
    advertisedSubnets: [10.70.0.0/24]
    extraArgs:
      listen-metrics-urls: http://0.0.0.0:2381

  proxy:
    disabled: true  # replaced by helm chart deployment later

  scheduler:
    extraArgs:
      bind-address: 0.0.0.0
